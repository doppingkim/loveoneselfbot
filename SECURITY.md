# 🔒 보안 가이드

## ⚠️ 중요 보안 사항

### 1. 환경 변수 보안
- **절대 하드코딩 금지**: API 키나 토큰을 코드에 직접 입력하지 마세요
- **환경 변수 사용**: `.env` 파일이나 Railway 환경 변수만 사용
- **Git 제외**: `.env` 파일은 `.gitignore`에 포함되어 있습니다

### 2. API 키 관리
- **정기적 갱신**: API 키를 정기적으로 갱신하세요
- **권한 최소화**: 필요한 최소한의 권한만 부여하세요
- **사용량 모니터링**: OpenAI 대시보드에서 사용량을 정기적으로 확인하세요

### 3. 사용자 접근 제어
- **화이트리스트**: `ALLOWED_USER_IDS`로 비밀 명령어 사용자 제한
- **로그 모니터링**: 권한 없는 접근 시도 로그 확인
- **정기적 검토**: 허용된 사용자 목록을 정기적으로 검토하세요

### 4. API 호출 제한
- **일일 제한**: 하루 최대 100회 호출 제한
- **간격 제한**: 최소 5초 간격으로 스팸 방지
- **자동 리셋**: 매일 자정에 카운트 자동 리셋

## 🛡️ 보안 체크리스트

배포 전 다음 사항들을 확인하세요:

- [ ] `.env` 파일이 Git에 커밋되지 않았는지 확인
- [ ] API 키가 코드에 하드코딩되지 않았는지 확인
- [ ] `ALLOWED_USER_IDS`가 올바르게 설정되었는지 확인
- [ ] Railway 환경 변수가 올바르게 설정되었는지 확인
- [ ] 로그 모니터링이 활성화되어 있는지 확인

## 🚨 보안 사고 대응

### API 키 노출 시
1. **즉시 키 갱신**: OpenAI/Telegram에서 새 키 발급
2. **환경 변수 업데이트**: Railway에서 새 키로 업데이트
3. **재배포**: 즉시 재배포하여 새 키 적용

### 권한 없는 접근 시도 시
1. **로그 확인**: 어떤 사용자가 언제 접근했는지 확인
2. **사용자 차단**: 필요시 `ALLOWED_USER_IDS`에서 제거
3. **모니터링 강화**: 접근 패턴 분석

## 📞 지원

보안 관련 문의사항이 있으시면 이슈를 생성해주세요.
